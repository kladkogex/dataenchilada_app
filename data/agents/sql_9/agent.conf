<source>
  @type sql
  host localhost
  database rdb_database
  adapter mysql2
  username myusername
  password mypassword
  select_interval 60s
  select_limit 500

  
    <table>
      tag type_expected_db_table_tag1
      table rdb_table
      update_column updated_at
      time_column updated_at
      
    </table>
  
</source>


<match fluent.*>
  @type stdout
</match>

<match **>
  @type copy

  
  <store>
    
  @type cassandra_driver

  hosts 51.128.9.219

  keyspace data_enchilada
  column_family type_expected_db_table_tag1
  schema  '{:id => :integer, :name => :string, :created_at => :string, :updated_at => :string}'
  json_column json
  pop_data_keys false #????
  ttl 60


  </store>
  
  <store>
      @type webhdfs
  host 51.77.1.9
  port 50070
  path /data_enchilada/test2/%Y%m%d/data-%H.json
  flush_interval 10s
  <format>
    @type json
  </format>

  </store>
  
</match>
